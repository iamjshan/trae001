# 标准物质管理助手

一个基于Web的标准物质库存管理系统，支持PC端和移动端使用，可离线运行，数据可同步到Supabase云端。

## 功能特性

### 核心功能

#### 1. 库存管理
- **物品录入**：支持录入标准物质名称、编号、批次号、唯一标识、数量、有效期等信息
- **库存查询**：实时查看库存状态，支持按名称、编号搜索
- **状态监控**：自动标记临期（30天内到期）和过期物品
- **二维码管理**：为每个物品生成唯一二维码，支持扫码快速出库
- **标签打印**：支持打印40x30mm标签（二维码+唯一标识）

#### 2. 入库/出库操作
- **扫码入库**：支持扫描PDF证书二维码自动填充信息
- **扫码出库**：扫描二维码快速完成出库操作
- **手动操作**：支持手动输入完成出入库
- **批量操作**：支持连续扫码，快速处理多个物品

#### 3. AI智能识别（大模型分析）
- **AI识别**：基于豆包大模型（火山方舟）的智能图像识别
- **多模态分析**：支持图片、PDF文件分析
- **自动字段匹配**：自动识别并匹配以下字段：
  - 标准物质名称
  - 编号/批号
  - 生产厂家
  - 保存条件
  - 稀释条件
  - 有效期
  - 组分信息（混标自动识别多个组分）
- **单标/混标识别**：自动判断是单标还是混标
- **组分提取**：混标自动提取所有组分的名称、标准值、单位、不确定度
- **双图识别**：支持同时上传两张图片进行综合分析

#### 4. 消息中心
- **站内消息**：支持用户之间发送消息
- **消息提醒**：未读消息有红点提示
- **消息记录**：查看已发送和已收到的消息

#### 5. 人员管理
- **角色系统**：支持三种角色
  - 标准物质管理员：拥有所有权限
  - 化验员：可查看库存和进行出入库操作
  - 普通用户：仅可查看库存
- **用户管理**：管理员可添加、删除用户，修改用户角色

#### 6. 操作记录
- **完整记录**：自动记录所有入库、出库操作
- **记录查询**：查看历史操作记录
- **操作追溯**：可追溯每个物品的操作历史

#### 7. 数据管理
- **数据导出**：支持导出Excel文件（库存数据、操作记录、人员数据）
- **数据导入**：支持从Excel导入库存数据
- **云端同步**：数据自动同步到Supabase云端
- **离线模式**：支持离线使用，网络恢复后自动同步

### 技术特性

#### 1. 跨平台支持
- **PC端**：完整的桌面浏览器体验
- **移动端**：适配手机浏览器，支持触摸操作
- **APP集成**：支持嵌入uni-app/5+App中使用

#### 2. 扫码功能
- **摄像头扫码**：支持调用摄像头扫描二维码/条形码
- **PDF扫码**：支持从PDF证书中扫描二维码
- **手动输入**：支持手动输入编码

#### 3. 打印功能
- **标签打印**：支持蓝牙打印机打印标签
- **多种指令**：支持CPCL、ESC/POS、TSPL等打印指令
- **德佟打印机**：专门适配德佟DP27P便携式标签打印机

#### 4. 数据安全
- **用户认证**：基于Supabase的身份认证
- **数据加密**：敏感数据加密存储
- **访问控制**：基于角色的权限管理

## 使用说明

### 首次使用

1. **注册账号**：首次使用需要注册管理员账号
2. **登录系统**：使用注册的账号登录
3. **添加人员**：管理员可在人员管理中添加其他用户

### 日常使用

#### 入库流程
1. 点击"入库"按钮
2. 选择入库方式：
   - **AI识别**：点击"AI识别"按钮，拍摄或上传标准物质标签照片，系统自动识别并填充信息
   - **扫码**：扫描PDF证书上的二维码
   - **手动输入**：手动填写物品信息
3. 系统自动生成唯一标识
4. 可选择打印标签

#### AI识别使用说明
1. 在入库页面点击"AI识别"按钮
2. 选择识别方式：
   - **拍照**：使用摄像头拍摄标准物质标签
   - **上传**：从相册选择图片或PDF文件
3. 支持上传两张图片进行综合分析（如正面和背面）
4. 等待AI分析完成，系统自动提取字段
5. 检查识别结果，确认无误后点击"应用识别结果"
6. 补充必要信息后完成入库

#### 出库流程
1. 点击"出库"按钮
2. 扫描物品上的二维码，或手动输入唯一标识
3. 确认出库信息
4. 完成出库

#### 查看库存
1. 进入"库存"页面
2. 可查看所有物品的库存状态
3. 点击物品可查看详情
4. 可导出库存数据

### 离线使用

1. 在设置中开启"离线模式"
2. 离线模式下所有数据存储在本地
3. 网络恢复后数据自动同步到云端

## 系统要求

### 浏览器支持
- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

### 移动端要求
- iOS 13+ 或 Android 8+
- 支持摄像头访问（用于扫码）
- 蓝牙功能（用于打印标签）

### 网络要求
- 在线模式：需要互联网连接
- 离线模式：无需网络，但首次使用需要联网注册

## 技术栈

- **前端**：HTML5、CSS3、JavaScript（原生）
- **UI框架**：Tailwind CSS
- **图标**：Font Awesome 4.7
- **图表**：Chart.js
- **二维码**：QRCode.js、jsQR
- **Excel操作**：SheetJS (xlsx)
- **PDF解析**：PDF.js
- **后端**：Supabase（PostgreSQL + Auth + Realtime）
- **AI大模型**：豆包多模态模型（火山方舟API）
- **图像识别**：基于Vision的多模态AI识别

## 文件说明

- `index.html` - 主程序文件（单页应用）


## 注意事项

1. **数据备份**：建议定期导出数据备份
2. **标签打印**：使用德佟打印机时需要开启蓝牙和GPS定位
3. **扫码功能**：需要摄像头权限，请在HTTPS环境或localhost下使用
4. **离线模式**：离线模式下无法使用消息功能

## 更新日志

### v2.0.0
- 新增AI智能识别功能（基于豆包大模型）
- 支持标准物质标签图像自动识别和字段匹配
- 支持单标/混标自动识别和组分提取
- 新增人员管理角色系统（管理员/化验员/普通用户）
- 优化二维码显示速度
- 优化数据导出速度
- 修复消息模块加载问题
- 新增标签打印功能

## 许可证

MIT License

## 联系方式

如有问题或建议，请通过以下方式联系：
- 在系统中使用消息功能发送反馈
- 提交Issue到项目仓库
